# 入門｜形式言語・オートマトン・チューリングマシン

## オートマトン

### 第一古代語
第一古代語には以下の5つの言葉が存在する

1. `001`
2. `10110`
3. `0110`
4. `1001`
5. `1100`

この5つの文字列は、それを受理できる有限オートマトンが存在するため、正則言語である

ここで、第一古代語を受理する決定性有限オートマトンのアーキテクチャを考えてみる

まず、`001`を受理するアーキテクチャをそのまま構成してみる（`000`というパターンは第一古代語に含まれていないため、例外状態にたどり着くようにしてある）

```mermaid
graph LR
    I(初期状態)
    A((受理状態))
    E[例外状態]
    I -.-> |0|a
    a -.-> |0|b
    b -.-> |1|A
    b -.-> |0|E
```
![01-1](./graph/01-1.png)

上記のアーキテクチャが`0110`を受理するように状態遷移を足してみると、以下のようになる

```mermaid
graph LR
    I(初期状態)
    A((受理状態))
    E[例外状態]
    I -.-> |0|a
    a -.-> |0|b
    a -.-> |1|c
    b -.-> |1|A
    b -.-> |0|E
    c -.-> |1|d
    c -.-> |0|E
    d -.-> |0|A
    d -.-> |1|E
```
![01-2](./graph/01-2.png)

同様にして、`10110`, `1001`, `1100`を受理するように状態遷移を全て書き込むと、以下のようになる

```mermaid
graph LR
    I(初期状態)
    A((受理状態))
    E[例外状態]
    I -.-> |0|a
    a -.-> |0|b
    a -.-> |1|c
    b -.-> |1|A
    b -.-> |0|E
    c -.-> |1|d
    c -.-> |0|E
    d -.-> |0|A
    d -.-> |1|E

    I -.-> |1|e
    e -.-> |0|f
    e -.-> |1|j
    f -.-> |1|g
    f -.-> |0|i
    g -.-> |1|h
    g -.-> |0|E
    h -.-> |0|A
    h -.-> |1|E
    i -.-> |1|A
    i -.-> |0|E
    j -.-> |1|E
    j -.-> |0|k
    k -.-> |0|A
    k -.-> |1|E
```
![01-3](./graph/01-3.png)

このように、そのまま書き下すと状態遷移が複雑化してしまうが、よく見ると、いくつか同一の状態を示しているものがある

コツとしては、`受理状態`, `例外状態`に至る経路が同一である状態を探すことである

まず、`1 => 受理, 0 => 例外`という状態遷移をする`b`と`i`は同一状態とみなせる

同様に、`0 => 受理, 1 => 例外`という状態遷移をする`d`, `h`, `k`も同一状態とみなせるため、以下のようにまとめることができる

```mermaid
graph LR
    I(初期状態)
    A((受理状態))
    E[例外状態]
    I -.-> |0|a
    a -.-> |0|b
    a -.-> |1|c
    b -.-> |1|A
    b -.-> |0|E
    c -.-> |1|d
    c -.-> |0|E
    d -.-> |0|A
    d -.-> |1|E

    I -.-> |1|e
    e -.-> |0|f
    e -.-> |1|j
    f -.-> |1|g
    f -.-> |0|b
    g -.-> |1|d
    g -.-> |0|E
    j -.-> |1|E
    j -.-> |0|d
```
![01-4](./graph/01-4.png)

`受理状態`, `例外状態`に至る経路が状態`b`, `d`からの状態遷移に絞られたので、今度は、状態`b`, `d`に至る経路をまとめれば良い（`1 => d, 0 => 例外`より`c = g`）

```mermaid
graph LR
    I(初期状態)
    A((受理状態))
    E[例外状態]
    I -.-> |0|a
    a -.-> |0|b
    a -.-> |1|c
    b -.-> |1|A
    b -.-> |0|E
    c -.-> |1|d
    c -.-> |0|E
    d -.-> |0|A
    d -.-> |1|E

    I -.-> |1|e
    e -.-> |0|f
    e -.-> |1|j
    f -.-> |1|c
    f -.-> |0|b
    j -.-> |1|E
    j -.-> |0|d
```
![01-5](./graph/01-5.png)

同様に、`0 => b, 1 => c`より`a = f`

```mermaid
graph LR
    I(初期状態)
    A((受理状態))
    E[例外状態]
    I -.-> |0|a
    a -.-> |0|b
    a -.-> |1|c
    b -.-> |1|A
    b -.-> |0|E
    c -.-> |1|d
    c -.-> |0|E
    d -.-> |0|A
    d -.-> |1|E

    I -.-> |1|e
    e -.-> |0|a
    e -.-> |1|j
    j -.-> |1|E
    j -.-> |0|d
```
![01-6](./graph/01-6.png)

仕上げとして、`例外状態`に遷移する経路を行き止まりとしてしまえば、だいぶ見やすいオートマトン・アーキテクチャになる

```mermaid
graph LR
    I(初期状態)
    A((受理状態))
    I -.-> |0|a
    a -.-> |0|b
    a -.-> |1|c
    b -.-> |1|A
    c -.-> |1|d
    d -.-> |0|A

    I -.-> |1|e
    e -.-> |0|a
    e -.-> |1|j
    j -.-> |0|d
```
![01-7](./graph/01-7.png)
